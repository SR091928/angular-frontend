<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
  </head>
  <body>
    <script type="text/javascript">
      var repo = window.location.pathname.split('/')[1];
      var base = '/' + repo + '/';

      console.log("404.html debug:");
      console.log("current pathname:", window.location.pathname);
      console.log("repo:", repo);
      console.log("base:", base);

      if (!window.location.pathname.startsWith(base) || window.location.pathname === base) {
        // Save current path for Angular to restore after reload
        sessionStorage.setItem(
          "redirect",
          location.pathname + location.search + location.hash
        );
        console.log("Redirecting to:", base);
        window.location.href = base;
      } else {
        console.log("Already at base, not redirecting.");
      }
      // If already at base, do nothing -- let Angular load and handle redirect from sessionStorage
    </script>
  </body>
</html>
